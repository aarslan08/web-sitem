// ==================== Dil Metinleri ====================
const translations = {
    tr: {
        // Navbar
        'Ana Sayfa': 'Ana Sayfa',
        'Hakkımda': 'Hakkımda',
        'Hizmetler': 'Hizmetler',
        'Projeler': 'Projeler',
        'İletişim': 'İletişim',
        
        // Hero Section
        'Merhaba, ben': 'Merhaba, ben',
        'Ankara Hacı Bayram Veli Üniversitesi Ekonometri öğrencisi ve freelance yazılım geliştiriciyim. Mobil uygulama, web sitesi ve işletme yazılımları geliştiriyorum.': 'Ankara Hacı Bayram Veli Üniversitesi Ekonometri öğrencisi ve freelance yazılım geliştiriciyim. Mobil uygulama, web sitesi ve işletme yazılımları geliştiriyorum.',
        'Ekonometri öğrencisi & Freelance geliştirici': 'Ekonometri öğrencisi & Freelance geliştirici',
        'Benimle İletişime Geç': 'Benimle İletişime Geç',
        
        // About Section
        'Hakkımda': 'Hakkımda',
        'Merhaba! Ben Ankara Hacı Bayram Veli Üniversitesi Ekonometri Bölümü 3. sınıf öğrencisiyim.': 'Merhaba! Ben Ankara Hacı Bayram Veli Üniversitesi Ekonometri Bölümü 3. sınıf öğrencisiyim.',
        'Ekonometri eğitimimin yanı sıra, yazılım geliştirme tutkuyla ilgileniyorum. Mobil uygulama geliştirme ve web tasarımı alanlarında kendimi geliştirerek, freelance projeler üzerinde çalışıyorum.': 'Ekonometri eğitimimin yanı sıra, yazılım geliştirme tutkuyla ilgileniyorum. Mobil uygulama geliştirme ve web tasarımı alanlarında kendimi geliştirerek, freelance projeler üzerinde çalışıyorum.',
        'Hedefim, analitik düşünce yapımı ve teknik becerilerimi birleştirerek, kullanıcı odaklı ve etkili çözümler üretmek. Modern teknolojileri öğrenmek ve projelerimde uygulamak beni sürekli motive ediyor.': 'Hedefim, analitik düşünce yapımı ve teknik becerilerimi birleştirerek, kullanıcı odaklı ve etkili çözümler üretmek. Modern teknolojileri öğrenmek ve projelerimde uygulamak beni sürekli motive ediyor.',
        'Teknolojiler': 'Teknolojiler',
        'Yetenekler': 'Yetenekler',
        
        // Services Section
        'Hizmetler': 'Hizmetler',
        'Size sunduğum profesyonel hizmetler': 'Size sunduğum profesyonel hizmetler',
        'Mobil Uygulama Geliştirme': 'Mobil Uygulama Geliştirme',
        'iOS ve Android platformları için Flutter teknolojisi ile performanslı ve kullanıcı dostu mobil uygulamalar geliştiriyorum.': 'iOS ve Android platformları için Flutter teknolojisi ile performanslı ve kullanıcı dostu mobil uygulamalar geliştiriyorum.',
        'Web Sitesi Geliştirme': 'Web Sitesi Geliştirme',
        'Kurumsal web siteleri, e-ticaret platformları ve özel web uygulamaları tasarlıyor ve geliştiriyorum.': 'Kurumsal web siteleri, e-ticaret platformları ve özel web uygulamaları tasarlıyor ve geliştiriyorum.',
        'QR Menü Sistemleri': 'QR Menü Sistemleri',
        'Restoranlar ve kafeler için modern, temassız dijital menü çözümleri sunuyorum.': 'Restoranlar ve kafeler için modern, temassız dijital menü çözümleri sunuyorum.',
        'Kafe & Restoran Yazılımları': 'Kafe & Restoran Yazılımları',
        'Sipariş yönetimi, masa takibi ve stok kontrolü için entegre yazılım çözümleri geliştiriyorum.': 'Sipariş yönetimi, masa takibi ve stok kontrolü için entegre yazılım çözümleri geliştiriyorum.',
        'İşletme Otomasyon': 'İşletme Otomasyon',
        'İş süreçlerinizi dijitalleştiren ve otomatikleştiren özel yazılımlar üretiyorum.': 'İş süreçlerinizi dijitalleştiren ve otomatikleştiren özel yazılımlar üretiyorum.',
        'UI/UX Tasarım': 'UI/UX Tasarım',
        'Kullanıcı deneyimini ön planda tutan, modern ve estetik arayüz tasarımları oluşturuyorum.': 'Kullanıcı deneyimini ön planda tutan, modern ve estetik arayüz tasarımları oluşturuyorum.',
        
        // Portfolio Section
        'Projeler': 'Projeler',
        'Son çalışmalarım ve projelerim': 'Son çalışmalarım ve projelerim',
        'Mindsy - Hafıza Oyunu': 'Mindsy - Hafıza Oyunu',
        'Eğlenceli ve zeka geliştirici hafıza oyunu uygulaması. Çocuklar ve yetişkinler için tasarlanmış, hafızayı güçlendiren interaktif oyun deneyimi. Yakında App Store ve Google Play Store\'da!': 'Eğlenceli ve zeka geliştirici hafıza oyunu uygulaması. Çocuklar ve yetişkinler için tasarlanmış, hafızayı güçlendiren interaktif oyun deneyimi. Yakında App Store ve Google Play Store\'da!',
        'Yakında App Store\'da': 'Yakında App Store\'da',
        'Yakında Google Play\'de': 'Yakında Google Play\'de',
        'VEBET - Veri Bilimi ve Ekonometri Topluluğu': 'VEBET - Veri Bilimi ve Ekonometri Topluluğu',
        'Ankara Hacı Bayram Veli Üniversitesi öğrenci topluluğu için modern, responsive ve SEO uyumlu web sitesi. Yapay zeka, veri bilimi ve ekonometri odaklı içerik yönetim sistemi.': 'Ankara Hacı Bayram Veli Üniversitesi öğrenci topluluğu için modern, responsive ve SEO uyumlu web sitesi. Yapay zeka, veri bilimi ve ekonometri odaklı içerik yönetim sistemi.',
        'Bağoğlu Hafriyat - İş Makinesi Kiralama': 'Bağoğlu Hafriyat - İş Makinesi Kiralama',
        '25+ yıllık tecrübeli hafriyat firması için profesyonel kurumsal web sitesi. Online teklif sistemi, hizmet katalogu ve iletişim entegrasyonu ile tam teşekküllü dijital platform.': '25+ yıllık tecrübeli hafriyat firması için profesyonel kurumsal web sitesi. Online teklif sistemi, hizmet katalogu ve iletişim entegrasyonu ile tam teşekküllü dijital platform.',
        'Siteyi Ziyaret Et': 'Siteyi Ziyaret Et',
        'Web Sitesini Ziyaret Et': 'Web Sitesini Ziyaret Et',
        
        // Contact Section
        'İletişim': 'İletişim',
        'Benimle iletişime geçin': 'Benimle iletişime geçin',
        'E-posta': 'E-posta',
        'Konum': 'Konum',
        'Sosyal Medya': 'Sosyal Medya',
        'Adınız': 'Adınız',
        'E-posta Adresiniz': 'E-posta Adresiniz',
        'Konu': 'Konu',
        'Mesajınız': 'Mesajınız',
        'Mesaj Gönder': 'Mesaj Gönder',
        
        // Footer
        'Tüm hakları saklıdır.': 'Tüm hakları saklıdır.'
    },
    en: {
        // Navbar
        'Ana Sayfa': 'Home',
        'Hakkımda': 'About',
        'Hizmetler': 'Services',
        'Projeler': 'Portfolio',
        'İletişim': 'Contact',
        
        // Hero Section
        'Merhaba, ben': 'Hello, I\'m',
        'Ankara Hacı Bayram Veli Üniversitesi Ekonometri öğrencisi ve freelance yazılım geliştiriciyim. Mobil uygulama, web sitesi ve işletme yazılımları geliştiriyorum.': 'Econometrics student at Ankara Hacı Bayram Veli University and freelance software developer. I develop mobile applications, websites and business software.',
        'Ekonometri öğrencisi & Freelance geliştirici': 'Econometrics Student & Freelance Developer',
        'Benimle İletişime Geç': 'Get In Touch',
        
        // About Section
        'Hakkımda': 'About Me',
        'Merhaba! Ben Ankara Hacı Bayram Veli Üniversitesi Ekonometri Bölümü 3. sınıf öğrencisiyim.': 'Hello! I\'m a 3rd year Econometrics student at Ankara Hacı Bayram Veli University.',
        'Ekonometri eğitimimin yanı sıra, yazılım geliştirme tutkuyla ilgileniyorum. Mobil uygulama geliştirme ve web tasarımı alanlarında kendimi geliştirerek, freelance projeler üzerinde çalışıyorum.': 'Alongside my econometrics education, I\'m passionate about software development. I develop myself in mobile app development and web design, working on freelance projects.',
        'Hedefim, analitik düşünce yapımı ve teknik becerilerimi birleştirerek, kullanıcı odaklı ve etkili çözümler üretmek. Modern teknolojileri öğrenmek ve projelerimde uygulamak beni sürekli motive ediyor.': 'My goal is to combine analytical thinking and technical skills to create user-focused and effective solutions. Learning modern technologies and applying them in my projects keeps me constantly motivated.',
        'Teknolojiler': 'Technologies',
        'Yetenekler': 'Skills',
        
        // Services Section
        'Hizmetler': 'Services',
        'Size sunduğum profesyonel hizmetler': 'Professional services I offer',
        'Mobil Uygulama Geliştirme': 'Mobile App Development',
        'iOS ve Android platformları için Flutter teknolojisi ile performanslı ve kullanıcı dostu mobil uygulamalar geliştiriyorum.': 'I develop high-performance and user-friendly mobile applications for iOS and Android platforms using Flutter technology.',
        'Web Sitesi Geliştirme': 'Web Development',
        'Kurumsal web siteleri, e-ticaret platformları ve özel web uygulamaları tasarlıyor ve geliştiriyorum.': 'I design and develop corporate websites, e-commerce platforms and custom web applications.',
        'QR Menü Sistemleri': 'QR Menu Systems',
        'Restoranlar ve kafeler için modern, temassız dijital menü çözümleri sunuyorum.': 'I offer modern, contactless digital menu solutions for restaurants and cafes.',
        'Kafe & Restoran Yazılımları': 'Cafe & Restaurant Software',
        'Sipariş yönetimi, masa takibi ve stok kontrolü için entegre yazılım çözümleri geliştiriyorum.': 'I develop integrated software solutions for order management, table tracking and inventory control.',
        'İşletme Otomasyon': 'Business Automation',
        'İş süreçlerinizi dijitalleştiren ve otomatikleştiren özel yazılımlar üretiyorum.': 'I produce custom software that digitizes and automates your business processes.',
        'UI/UX Tasarım': 'UI/UX Design',
        'Kullanıcı deneyimini ön planda tutan, modern ve estetik arayüz tasarımları oluşturuyorum.': 'I create modern and aesthetic interface designs that prioritize user experience.',
        
        // Portfolio Section
        'Projeler': 'Portfolio',
        'Son çalışmalarım ve projelerim': 'My recent works and projects',
        'Mindsy - Hafıza Oyunu': 'Mindsy - Memory Game',
        'Eğlenceli ve zeka geliştirici hafıza oyunu uygulaması. Çocuklar ve yetişkinler için tasarlanmış, hafızayı güçlendiren interaktif oyun deneyimi. Yakında App Store ve Google Play Store\'da!': 'Fun and brain-boosting memory game app. Interactive gaming experience designed for kids and adults to strengthen memory. Coming soon to App Store and Google Play Store!',
        'Yakında App Store\'da': 'Coming Soon to App Store',
        'Yakında Google Play\'de': 'Coming Soon to Google Play',
        'VEBET - Veri Bilimi ve Ekonometri Topluluğu': 'VEBET - Data Science and Econometrics Community',
        'Ankara Hacı Bayram Veli Üniversitesi öğrenci topluluğu için modern, responsive ve SEO uyumlu web sitesi. Yapay zeka, veri bilimi ve ekonometri odaklı içerik yönetim sistemi.': 'Modern, responsive and SEO-friendly website for Ankara Hacı Bayram Veli University student community. AI, data science and econometrics focused content management system.',
        'Bağoğlu Hafriyat - İş Makinesi Kiralama': 'Bağoğlu Hafriyat - Construction Equipment Rental',
        '25+ yıllık tecrübeli hafriyat firması için profesyonel kurumsal web sitesi. Online teklif sistemi, hizmet katalogu ve iletişim entegrasyonu ile tam teşekküllü dijital platform.': 'Professional corporate website for 25+ years experienced excavation company. Full-featured digital platform with online quotation system, service catalog and contact integration.',
        'Siteyi Ziyaret Et': 'Visit Website',
        'Web Sitesini Ziyaret Et': 'Visit Website',
        
        // Contact Section
        'İletişim': 'Contact',
        'Benimle iletişime geçin': 'Get in touch with me',
        'E-posta': 'Email',
        'Konum': 'Location',
        'Sosyal Medya': 'Social Media',
        'Adınız': 'Your Name',
        'E-posta Adresiniz': 'Your Email',
        'Konu': 'Subject',
        'Mesajınız': 'Your Message',
        'Mesaj Gönder': 'Send Message',
        
        // Footer
        'Tüm hakları saklıdır.': 'All rights reserved.'
    }
};

// ==================== State Management ====================
class AppState {
    constructor() {
        this.currentLang = localStorage.getItem('language') || 'tr';
        // Varsayılan olarak karanlık mod açık, kullanıcı tercihi varsa onu kullan
        const savedDarkMode = localStorage.getItem('darkMode');
        this.isDarkMode = savedDarkMode === null ? true : savedDarkMode === 'true';
        this.init();
    }

    init() {
        this.applyTheme();
        this.applyLanguage();
    }

    toggleTheme() {
        this.isDarkMode = !this.isDarkMode;
        localStorage.setItem('darkMode', this.isDarkMode);
        this.applyTheme();
    }

    applyTheme() {
        if (this.isDarkMode) {
            document.body.classList.add('dark-mode');
            const themeIcon = document.querySelector('.theme-toggle i');
            if (themeIcon) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
        } else {
            document.body.classList.remove('dark-mode');
            const themeIcon = document.querySelector('.theme-toggle i');
            if (themeIcon) {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        }
    }

    toggleLanguage() {
        this.currentLang = this.currentLang === 'tr' ? 'en' : 'tr';
        localStorage.setItem('language', this.currentLang);
        this.applyLanguage();
    }

    applyLanguage() {
        const langText = document.getElementById('langText');
        if (langText) {
            langText.textContent = this.currentLang === 'tr' ? 'EN' : 'TR';
        }

        // HTML lang attribute
        document.documentElement.lang = this.currentLang;

        // Update all translatable elements
        const elements = document.querySelectorAll('[data-tr]');
        elements.forEach(element => {
            const trKey = element.getAttribute('data-tr');
            if (translations[this.currentLang] && translations[this.currentLang][trKey]) {
                // Handle different element types
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.setAttribute('placeholder', translations[this.currentLang][trKey]);
                } else if (element.tagName === 'BUTTON') {
                    element.textContent = translations[this.currentLang][trKey];
                } else {
                    element.textContent = translations[this.currentLang][trKey];
                }
            }
        });
    }
}

// ==================== Navigation Controller ====================
class NavigationController {
    constructor() {
        this.navbar = document.getElementById('navbar');
        this.mobileToggle = document.getElementById('mobileToggle');
        this.navMenu = document.getElementById('navMenu');
        this.navLinks = document.querySelectorAll('.nav-link');
        this.init();
    }

    init() {
        this.setupScrollEffect();
        this.setupMobileMenu();
        this.setupSmoothScroll();
    }

    setupScrollEffect() {
        let lastScroll = 0;
        
        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            
            // Add scrolled class for shadow effect
            if (currentScroll > 50) {
                this.navbar.classList.add('scrolled');
            } else {
                this.navbar.classList.remove('scrolled');
            }

            lastScroll = currentScroll;
        });
    }

    setupMobileMenu() {
        if (this.mobileToggle && this.navMenu) {
            this.mobileToggle.addEventListener('click', () => {
                this.mobileToggle.classList.toggle('active');
                this.navMenu.classList.toggle('active');
            });

            // Close menu when clicking on a link
            this.navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    this.mobileToggle.classList.remove('active');
                    this.navMenu.classList.remove('active');
                });
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.nav-container')) {
                    this.mobileToggle.classList.remove('active');
                    this.navMenu.classList.remove('active');
                }
            });
        }
    }

    setupSmoothScroll() {
        this.navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                const href = link.getAttribute('href');
                if (href.startsWith('#')) {
                    e.preventDefault();
                    const targetId = href.substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        const offsetTop = targetElement.offsetTop - 80;
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });
    }
}

// ==================== Form Controller ====================
class FormController {
    constructor() {
        this.form = document.getElementById('contactForm');
        this.init();
    }

    init() {
        if (this.form) {
            this.form.addEventListener('submit', (e) => this.handleSubmit(e));
        }
    }

    handleSubmit(e) {
        e.preventDefault();
        
        const formData = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            subject: document.getElementById('subject').value,
            message: document.getElementById('message').value
        };

        // Validation
        if (!this.validateForm(formData)) {
            return;
        }

        // Show success message (in real scenario, this would send data to server)
        this.showMessage('success');
        this.form.reset();
    }

    validateForm(data) {
        // Name validation
        if (data.name.trim().length < 2) {
            this.showMessage('error', 'Lütfen geçerli bir ad girin.');
            return false;
        }

        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(data.email)) {
            this.showMessage('error', 'Lütfen geçerli bir e-posta adresi girin.');
            return false;
        }

        // Subject validation
        if (data.subject.trim().length < 3) {
            this.showMessage('error', 'Lütfen bir konu belirtin.');
            return false;
        }

        // Message validation
        if (data.message.trim().length < 10) {
            this.showMessage('error', 'Mesajınız en az 10 karakter olmalıdır.');
            return false;
        }

        return true;
    }

    showMessage(type, customMessage = '') {
        const existingAlert = document.querySelector('.form-alert');
        if (existingAlert) {
            existingAlert.remove();
        }

        const alert = document.createElement('div');
        alert.className = `form-alert ${type}`;
        
        if (type === 'success') {
            alert.textContent = appState.currentLang === 'tr' 
                ? 'Mesajınız başarıyla gönderildi! En kısa sürede size dönüş yapacağım.'
                : 'Your message has been sent successfully! I will get back to you as soon as possible.';
            alert.style.cssText = `
                padding: 1rem 1.5rem;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                border-radius: 0.5rem;
                margin-top: 1rem;
                animation: slideIn 0.3s ease-out;
            `;
        } else {
            alert.textContent = customMessage;
            alert.style.cssText = `
                padding: 1rem 1.5rem;
                background: linear-gradient(135deg, #ef4444, #dc2626);
                color: white;
                border-radius: 0.5rem;
                margin-top: 1rem;
                animation: slideIn 0.3s ease-out;
            `;
        }

        this.form.appendChild(alert);

        // Remove alert after 5 seconds
        setTimeout(() => {
            alert.style.animation = 'slideOut 0.3s ease-out';
            setTimeout(() => alert.remove(), 300);
        }, 5000);
    }
}

// ==================== Animation Controller ====================
class AnimationController {
    constructor() {
        this.observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };
        this.init();
    }

    init() {
        this.setupIntersectionObserver();
    }

    setupIntersectionObserver() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, this.observerOptions);

        // Observe all sections
        const sections = document.querySelectorAll('section');
        sections.forEach((section, index) => {
            if (section.id !== 'home') {
                section.style.opacity = '0';
                section.style.transform = 'translateY(30px)';
                section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                observer.observe(section);
            }
        });

        // Observe service cards
        const serviceCards = document.querySelectorAll('.service-card');
        serviceCards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = `opacity 0.6s ease-out ${index * 0.1}s, transform 0.6s ease-out ${index * 0.1}s`;
            observer.observe(card);
        });

        // Observe portfolio items
        const portfolioItems = document.querySelectorAll('.portfolio-item');
        portfolioItems.forEach((item, index) => {
            item.style.opacity = '0';
            item.style.transform = 'translateY(30px)';
            item.style.transition = `opacity 0.6s ease-out ${index * 0.1}s, transform 0.6s ease-out ${index * 0.1}s`;
            observer.observe(item);
        });
    }
}

// ==================== App Initialization ====================
let appState;
let navigationController;
let formController;
let animationController;

document.addEventListener('DOMContentLoaded', () => {
    // Initialize app state
    appState = new AppState();
    
    // Initialize controllers
    navigationController = new NavigationController();
    formController = new FormController();
    animationController = new AnimationController();
    
    // Setup event listeners
    setupEventListeners();
});

function setupEventListeners() {
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
        themeToggle.addEventListener('click', () => {
            appState.toggleTheme();
        });
    }

    // Language toggle
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
        langToggle.addEventListener('click', () => {
            appState.toggleLanguage();
        });
    }
}

// ==================== Performance Optimization ====================
// Lazy load images when they become visible
if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                if (img.dataset.src) {
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                    imageObserver.unobserve(img);
                }
            }
        });
    });

    document.querySelectorAll('img[data-src]').forEach(img => {
        imageObserver.observe(img);
    });
}

// Add CSS for animations
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideOut {
        from {
            opacity: 1;
            transform: translateY(0);
        }
        to {
            opacity: 0;
            transform: translateY(-20px);
        }
    }
`;
document.head.appendChild(style);

